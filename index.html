<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Renaissance Museum  — C1 Lesson</title>
<style>
  /* Cinnamon–beige–gold scheme */
  :root{--bg:#f5f0e6;--card:#fffaf3;--ink:#3b2f2f;--muted:#7a6e6e;--accent:#d9a86c;--good:#2e7d32;--bad:#c0392b;--gold:#c49b5a}
  html,body{height:100%;background:var(--bg);color:var(--ink);font:16px/1.5 system-ui,Segoe UI,Roboto,Helvetica,Arial,sans-serif;margin:0}
  header{position:sticky;top:0;z-index:10;background:#f3e8d1;border-bottom:2px solid #e0cba6}
  .wrap{max-width:1300px;margin:0 auto;padding:16px}
  h1{font-size:clamp(1.4rem,2.5vw,2rem);margin:0 0 4px}
  .sub{color:var(--muted);font-size:.95rem}
  .controls{display:flex;flex-wrap:wrap;gap:12px;align-items:center;margin-top:10px}
  .pill{display:inline-flex;align-items:center;gap:8px;border:1px solid #e0cba6;background:#fff4e6;padding:8px 12px;border-radius:999px}
  select,button{background:#fff4e6;border:1px solid #d8b788;color:var(--ink);border-radius:8px;padding:8px}
  button.primary{background:linear-gradient(180deg,#e5b567,#c79843);border:0;color:#fff}
  button.ghost{background:#fff4e6;border-color:#d8b788}
  .tabs{display:flex;gap:8px;flex-wrap:wrap;margin:8px 0}
  .tab{padding:8px 12px;border-radius:999px;border:1px solid #d8b788;background:#fff4e6;color:var(--ink);cursor:pointer}
  .tab.active{background:var(--accent);border-color:transparent;color:#fff}
  .panel{display:none}
  .panel.active{display:block}

  /* Gallery: exactly 4 columns */
  .grid{display:grid;grid-template-columns:repeat(4,1fr);gap:18px}
  .card{background:var(--card);border:1px solid #e0cba6;border-radius:14px;overflow:hidden;display:flex;flex-direction:column}
  .card img{width:100%;height:220px;object-fit:contain;background:#fdf6ec;cursor:pointer;object-position:center}
  .pad{padding:12px}
  .title{display:flex;justify-content:space-between;align-items:center;gap:8px}
  .title h3{font-size:1rem;margin:0}
  .badge{font-size:.75rem;color:#fff;background:var(--gold);padding:3px 8px;border-radius:999px}
  .feedback{min-height:22px;margin-top:6px;font-weight:700}
  .ok{color:var(--good)} .no{color:var(--bad)} .muted{color:var(--muted)}
  .progress{height:10px;background:#f2e5d4;border:1px solid #e0cba6;border-radius:999px;overflow:hidden}
  .bar{height:100%;width:0;background:linear-gradient(90deg,#c49b5a,#e5b567)}
  details{background:#fff4e6;border:1px solid #e0cba6;border-radius:12px;padding:10px}
  details summary{cursor:pointer;font-weight:600}

  /* Lightbox */
  #lightbox{position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,.8);display:none;align-items:center;justify-content:center;z-index:100}
  #lightbox img{max-width:90%;max-height:90%;border:6px solid #fff;border-radius:8px;box-shadow:0 0 20px #000}

  /* Glossary (under images) — two side-by-side columns */
  .dndWrapper{display:flex;gap:20px;margin-top:12px}
  .termColumn,.defColumn{flex:1}
  .termBox{background:#fffaf3;border:1px solid #d8b788;padding:8px;border-radius:8px;margin-bottom:8px;cursor:grab}
  .termBox.locked{opacity:1;cursor:default}
  .drop{min-height:60px;border:2px dashed #d8b788;border-radius:8px;padding:10px;background:#fdf6ec;margin-bottom:8px;display:flex;align-items:center;flex-wrap:wrap;gap:8px}
  .drop.correct{border-color:var(--good)}
  .drop.wrong{border-color:var(--bad)}
</style>
</head>
<body>
<header>
  <div class="wrap">
    <h1>Renaissance Museum </h1>
    <div class="sub">Audio-guided gallery • Session 1 ≤ 35′</div>
    <div class="controls">
      <div class="pill">
        <strong>Audio:</strong>
        <select id="audioSelect">
          <option value="The Renaissance AmE.mp3">American English</option>
          <option value="The Renaissance BrE.mp3" selected>British English</option>
        </select>
        <button id="playBtn" class="primary">▶︎ Play / Restart</button>
        <button id="pauseBtn" class="ghost">⏸ Pause</button>
      </div>
      <div class="pill"><strong>Progress</strong>
        <div style="width:240px" class="progress"><div id="progressBar" class="bar"></div></div>
        <span id="scoreText" class="muted">0 / 0</span>
      </div>
      <div class="pill"><span>Mode:</span>
        <button id="session1Btn" class="tab active">Session 1</button>
        <button id="session2Btn" class="tab">Session 2</button>
      </div>
    </div>
  </div>
</header>

<main class="wrap">
  <div id="session1" class="panel active">
    <section>
      <h2>Gallery: Identify the Artist (while listening)</h2>
      <p class="sub" style="margin:6px 0 14px">Pick the artist (or “Not mentioned in podcast”) for each artwork while listening.</p>
      <div id="gallery" class="grid"></div>
    </section>

    <section id="comprehension">
      <h3>Comprehension Check</h3>
      <details open>
        <summary>Gist (after first listen)</summary>
        <ol>
          <li>In which city did the Renaissance begin?</li>
          <li>Name two ideas/art practices that returned from classical antiquity.</li>
          <li>Which techniques make paintings look more “alive”?</li>
        </ol>
      </details>
    </section>

    <section id="glossarySection">
      <h3>Glossary Match</h3>
      <div id="dnd" class="dndWrapper"></div>
      <button id="checkGlossary" class="primary">Check Answers</button>
      <button id="resetGlossary" class="ghost">Reset</button>
      <div class="sub">Score: <span id="dndScore">0</span>/<span id="dndTotal">0</span></div>
    </section>
  </div>

  <div id="session2" class="panel">
    <h2>Session 2 (40′): Group Work</h2>
    <p class="sub">Open your group tab. The transcript is available in each tab’s “Transcript” section.</p>
    <div class="tabs" id="groupTabs"></div>
    <div id="groupPanels"></div>
  </div>
</main>

<div id="lightbox"><img src="" alt=""></div>
<audio id="guide" preload="metadata"></audio>

<script>
/* ===================== DATA ===================== */
/* 20 works: filenames must match exactly and be in the same folder as this HTML */
const WORKS = [
  {title:"Mona Lisa", file:"Mona Lisa.jpg", artist:"Leonardo da Vinci", mentioned:true},
  {title:"David", file:"David.jpg", artist:"Michelangelo", mentioned:true},
  {title:"The Last Supper", file:"The Last Supper.jpg", artist:"Leonardo da Vinci", mentioned:true},
  {title:"Pietà", file:"Pieta.jpg", artist:"Michelangelo", mentioned:true},
  {title:"The Birth of Venus", file:"The Birth of Venus.jpg", artist:"Sandro Botticelli", mentioned:true},
  {title:"The School of Athens", file:"The School of Athens.jpg", artist:"Raphael", mentioned:true},
  {title:"The Tempest", file:"The Tempest.jpg", artist:"Giorgione", mentioned:false},
  {title:"Vitruvian Man", file:"The Vitruvius Man.jpg", artist:"Leonardo da Vinci", mentioned:true},
  {title:"The Expulsion from the Garden of Eden", file:"The Expulsion from the Garden of Eden.jpg", artist:"Masaccio", mentioned:true},
  {title:"Saint Jerome in the Desert", file:"Saint Jerome in the Desert.jpg", artist:"Giovanni Bellini", mentioned:false},
  {title:"Saint Mark", file:"Saint Mark.jpg", artist:"Donatello", mentioned:true},
  {title:"Madonna with Child and Saints", file:"Madonna with Child and Saints.jpg", artist:"Giovanni Bellini", mentioned:true},
  {title:"Madonna and the…", file:"Madonna and the.jpg", artist:"Giovanni Bellini", mentioned:false},
  {title:"The Birth of Christ (relief)", file:"The Birth of Christ.jpg", artist:"Nicola Pisano", mentioned:false},
  {title:"Bacchus and Ariadne", file:"Bacchus and Ariadne.jpg", artist:"Titian", mentioned:true},
  {title:"Three Ages of Man", file:"Three Ages of Man.jpg", artist:"Titian", mentioned:false},
  {title:"The Separation of Light from Darkness", file:"The Separation of Light from Darkness or First Day of Creation.jpg", artist:"Michelangelo", mentioned:true},
  {title:"The Death of Saint Francis", file:"The Death of Saint Francis.jpg", artist:"Giotto", mentioned:true},
  {title:"The Birth of Venus (detail)", file:"The Birth of Venus det.jpg", artist:"Sandro Botticelli", mentioned:true},
  {title:"Renaissance Collage", file:"Renaissance-ppt_CC6.jpg", artist:"Sandro Botticelli", mentioned:false}
];

const ARTISTS = [
  "Giotto","Lorenzo Ghiberti","Donatello","Sandro Botticelli","Leonardo da Vinci","Michelangelo","Raphael","Giovanni Bellini","Giorgione","Titian","Tintoretto","Veronese","Masaccio","Not mentioned in podcast"
];

/* ===================== GALLERY ===================== */
const gallery = document.getElementById('gallery');
const scoreText = document.getElementById('scoreText');
const progressBar = document.getElementById('progressBar');

function renderGallery(){
  gallery.innerHTML='';
  WORKS.forEach((w,i)=>{
    const card=document.createElement('figure');
    card.className='card';
    card.innerHTML=`
      <img src="${w.file}" alt="${w.title}">
      <figcaption class="pad">
        <div class="title">
          <h3>${w.title}</h3>
          <span class="badge">${i+1}</span>
        </div>
        <label>Artist:</label>
        <select class="guess">${ARTISTS.map(a=>`<option>${a}</option>`).join('')}</select>
        <div class="feedback muted"></div>
      </figcaption>`;
    const img=card.querySelector('img');
    img.addEventListener('click',()=>showLightbox(w.file,w.title));

    const sel=card.querySelector('.guess');
    const fb=card.querySelector('.feedback');
    sel.addEventListener('change',()=>{
      const ok = (sel.value==="Not mentioned in podcast" && !w.mentioned) || (sel.value===w.artist && w.mentioned);
      fb.textContent = ok ? '✓ Correct' : '✗ Wrong';
      fb.className = 'feedback ' + (ok? 'ok' : 'no');
      updateProgress();
    });

    gallery.appendChild(card);
  });
  updateProgress();
}

function updateProgress(){
  const correct = gallery.querySelectorAll('.feedback.ok').length;
  scoreText.textContent = `${correct} / ${WORKS.length}`;
  progressBar.style.width = `${(correct/WORKS.length)*100}%`;
}

/* ===================== LIGHTBOX ===================== */
const lightbox = document.getElementById('lightbox');
const lbImg = lightbox.querySelector('img');
function showLightbox(src,alt){ lbImg.src=src; lbImg.alt=alt; lightbox.style.display='flex'; }
lightbox.addEventListener('click',()=> lightbox.style.display='none');
document.addEventListener('keydown',e=>{ if(e.key==='Escape') lightbox.style.display='none'; });

/* ===================== AUDIO ===================== */
const audio = document.getElementById('guide');
const playBtn = document.getElementById('playBtn');
const pauseBtn = document.getElementById('pauseBtn');
const audioSelect = document.getElementById('audioSelect');
playBtn.addEventListener('click',()=>{ const src=audioSelect.value; if(!audio.src || !audio.src.endsWith(src)) audio.src=src; audio.currentTime=0; audio.play(); });
pauseBtn.addEventListener('click',()=> audio.pause());

/* ===================== SESSION TABS ===================== */
const s1Btn=document.getElementById('session1Btn');
const s2Btn=document.getElementById('session2Btn');
const s1=document.getElementById('session1');
const s2=document.getElementById('session2');
s1Btn.addEventListener('click',()=>{ s1.classList.add('active'); s2.classList.remove('active'); s1Btn.classList.add('active'); s2Btn.classList.remove('active'); });
s2Btn.addEventListener('click',()=>{ s2.classList.add('active'); s1.classList.remove('active'); s2Btn.classList.add('active'); s1Btn.classList.remove('active'); });

/* ===================== GLOSSARY DnD ===================== */
const GLOSSARY = {
  "Perspective":"Technique creating illusion of depth on a flat surface.",
  "Humanism":"Belief in the value and agency of human beings.",
  "Fresco":"Painting on wet plaster.",
  "Chiaroscuro":"Use of strong contrasts of light and dark.",
  "Patron":"A supporter who finances the arts.",
  "Sfumato":"Blending of colors and tones without harsh lines.",
  "Contrapposto":"Pose in sculpture with weight shifted onto one leg.",
  "Dome":"Rounded vault forming the roof of a building.",
  "Linear perspective":"Mathematical system for creating 3D space on 2D surface.",
  "Classical antiquity":"Ancient Greek and Roman culture inspiring Renaissance."
};
const dnd=document.getElementById('dnd');
const checkBtn=document.getElementById('checkGlossary');
const resetBtn=document.getElementById('resetGlossary');
const dndScoreEl=document.getElementById('dndScore');
const dndTotalEl=document.getElementById('dndTotal');

function renderDnD(){
  dnd.innerHTML='';
  const termCol=document.createElement('div'); termCol.className='termColumn';
  const defCol=document.createElement('div'); defCol.className='defColumn';
  let terms=Object.keys(GLOSSARY).sort(()=>Math.random()-0.5);
  let defs=Object.values(GLOSSARY).sort(()=>Math.random()-0.5);
  dndTotalEl.textContent=terms.length; dndScoreEl.textContent=0;

  terms.forEach(t=>{
    const box=document.createElement('div');
    box.textContent=t; box.className='termBox'; box.draggable=true; box.dataset.term=t;
    box.addEventListener('dragstart',e=> e.dataTransfer.setData('text/plain',t));
    termCol.appendChild(box);
  });
  defs.forEach(def=>{
    const drop=document.createElement('div');
    drop.className='drop'; drop.textContent=def; drop.dataset.def=def;
    drop.addEventListener('dragover',e=> e.preventDefault());
    drop.addEventListener('drop',e=>{
      const term=e.dataTransfer.getData('text/plain');
      const el=document.querySelector(`.termBox[data-term="${term}"]`);
      if(drop.classList.contains('filled')){ drop.classList.add('wrong'); setTimeout(()=>drop.classList.remove('wrong'),500); return; }
      if(GLOSSARY[term]===drop.dataset.def){
        drop.classList.add('correct','filled');
        if(el){ el.draggable=false; el.classList.add('locked'); el.style.margin='0'; drop.appendChild(el); }
        dndScoreEl.textContent = +dndScoreEl.textContent + 1;
      }else{
        drop.classList.add('wrong'); setTimeout(()=>drop.classList.remove('wrong'),500);
      }
    });
    defCol.appendChild(drop);
  });
  dnd.append(termCol,defCol);
}

checkBtn.addEventListener('click',()=>{
  dnd.querySelectorAll('.drop').forEach(d=>{
    if(!d.classList.contains('correct')){
      d.classList.add('wrong'); setTimeout(()=>d.classList.remove('wrong'),500);
    }
  });
});
resetBtn.addEventListener('click',renderDnD);

/* Whole-page auto-scroll while dragging */
document.addEventListener('dragover',(e)=>{
  const m=60,y=e.clientY,h=window.innerHeight,step=20;
  if(y<m) window.scrollBy(0,-step); else if(y>h-m) window.scrollBy(0,step);
});

/* ===================== SESSION 2: Groups + Transcript ===================== */
const GROUPS = [
  {id:'A', title:'Group A — Curators', tasks:[
    'Write a 120–150 word museum label for one “mentioned” artwork. Include artist, date, technique, and why it matters.',
    'Add one question to engage visitors.'
  ]},
  {id:'B', title:'Group B — Timeline Team', tasks:[
    'Create a 6-step timeline of key Renaissance milestones referenced in the podcast.',
    'Note at least one Greek influence on each milestone.'
  ]},
  {id:'C', title:'Group C — Technique Explainers', tasks:[
    'Choose 3 techniques (e.g., perspective, chiaroscuro, sfumato).',
    'Explain each in 2–3 sentences with a real example from the gallery.'
  ]},
  {id:'D', title:'Group D — Critics', tasks:[
    'Compare two “mentioned” artists. 150–180 words.',
    'Focus on style, recurring themes, and patronage.'
  ]},
  {id:'E', title:'Group E — Audio Producers', tasks:[
    'Script a 60–90s mini audio guide for a “mentioned” artwork.',
    'Use 3 vocabulary items from the glossary correctly.'
  ]}
];
let transcriptText = '⟨Paste the podcast transcript here once, and it will appear in every group tab.⟩';

const groupTabsEl = document.getElementById('groupTabs');
const groupPanelsEl = document.getElementById('groupPanels');

function renderGroups(){
  groupTabsEl.innerHTML=''; groupPanelsEl.innerHTML='';
  GROUPS.forEach((g, idx)=>{
    const btn=document.createElement('button');
    btn.className='tab' + (idx===0?' active':'');
    btn.textContent=g.title;
    btn.addEventListener('click',()=>{
      [...groupTabsEl.children].forEach(b=>b.classList.remove('active'));
      [...groupPanelsEl.children].forEach(p=>p.classList.remove('active'));
      btn.classList.add('active');
      document.getElementById('panel-'+g.id).classList.add('active');
    });
    groupTabsEl.appendChild(btn);

    const panel=document.createElement('div');
    panel.id='panel-'+g.id;
    panel.className='panel' + (idx===0?' active':'');
    panel.innerHTML = `
      <h3>${g.title}</h3>
      <ol>${g.tasks.map(t=>`<li>${t}</li>`).join('')}</ol>
      <details style="margin-top:12px">
        <summary><strong>Transcript</strong> (toggle)</summary>
        <div style="white-space:pre-wrap; background:#fffaf3; border:1px solid #e0cba6; padding:10px; border-radius:8px; margin-top:8px;">${transcriptText}</div>
      </details>
    `;
    groupPanelsEl.appendChild(panel);
  });

  // Add a one-time paste box above tabs to set transcript for all groups
  if(!document.getElementById('txBox')){
    const box=document.createElement('div');
    box.id='txBox';
    box.className='pill';
    box.style.margin='8px 0 12px';
    box.innerHTML=`
      <span><strong>Transcript:</strong></span>
      <input id="txInput" placeholder="Paste once for all groups" style="min-width:280px" />
      <button id="txApply" class="ghost">Apply</button>
    `;
    groupTabsEl.parentNode.insertBefore(box, groupTabsEl);
    document.getElementById('txApply').addEventListener('click',()=>{
      const val=document.getElementById('txInput').value.trim();
      if(val){ transcriptText=val; renderGroups(); }
    });
  }
}

/* ===================== INIT ===================== */
renderGallery();
renderDnD();
renderGroups();
</script>
</body>
</html>
